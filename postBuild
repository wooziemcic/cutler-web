#!/usr/bin/env bash
set -euxo pipefail

echo "postBuild starting in: $(pwd)"
echo "Python: $(python --version)"
echo "Installing Playwright Chromium..."

# Ensure browsers install into a writable, predictable location
export PLAYWRIGHT_BROWSERS_PATH=0

python -m playwright install chromium

echo "postBuild finished. Browsers at:"
python - <<'PY'
import os, pathlib
p = pathlib.Path.home()/".cache/ms-playwright"
print(p, "exists:", p.exists())
print(list(p.glob("*")))
PY

#!/bin/bash
set -e

# Install Playwright browsers for this image
playwright install chromium

# Try to install OS deps; if some are already present, ignore errors
playwright install-deps chromium || true
